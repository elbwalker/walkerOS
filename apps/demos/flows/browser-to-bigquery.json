{
  "version": 1,
  "variables": {
    "COLLECT_URL": "http://localhost:8080/collect",
    "GCP_PROJECT_ID": "playground-388912"
  },
  "flows": {
    "web": {
      "web": {},
      "packages": {
        "@walkeros/collector": { "imports": ["startFlow"] },
        "@walkeros/web-source-browser": {},
        "@walkeros/web-destination-api": {},
        "@walkeros/destination-demo": {}
      },
      "sources": {
        "browser": {
          "package": "@walkeros/web-source-browser",
          "code": "sourceBrowser",
          "config": {
            "settings": {
              "pageview": true,
              "session": true
            }
          }
        }
      },
      "destinations": {
        "api": {
          "package": "@walkeros/web-destination-api",
          "code": "destinationAPI",
          "config": {
            "settings": {
              "url": "${COLLECT_URL}"
            }
          }
        },
        "demo": {
          "package": "@walkeros/destination-demo",
          "code": "destinationDemo",
          "config": {
            "settings": {
              "name": "Browser Demo"
            }
          }
        }
      },
      "collector": {
        "run": true
      }
    },
    "server": {
      "server": {},
      "packages": {
        "@walkeros/collector": { "imports": ["startFlow"] },
        "@walkeros/server-source-express": {},
        "@walkeros/destination-demo": {},
        "@walkeros/server-destination-gcp": {}
      },
      "sources": {
        "express": {
          "package": "@walkeros/server-source-express",
          "code": "sourceExpress",
          "config": {
            "settings": {
              "path": "/collect",
              "port": 8080,
              "status": true
            }
          }
        }
      },
      "destinations": {
        "demo": {
          "package": "@walkeros/destination-demo",
          "code": "destinationDemo",
          "config": {
            "settings": {
              "name": "Server Demo",
              "values": ["name", "data", "timestamp"]
            }
          }
        },
        "bigquery": {
          "package": "@walkeros/server-destination-gcp",
          "code": "destinationBigQuery",
          "config": {
            "settings": {
              "projectId": "${GCP_PROJECT_ID}",
              "datasetId": "walkerOS",
              "tableId": "events",
              "location": "EU",
              "bigquery": {
                "keyFilename": "./shared/credentials/sa-bigquery.json"
              }
            }
          }
        }
      },
      "collector": {
        "run": true,
        "logger": {
          "level": "DEBUG"
        }
      }
    }
  }
}
