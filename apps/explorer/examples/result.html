<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Result Display Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .controls {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        button {
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
        }
        button:hover {
            background: #f0f0f0;
        }
        .btn-primary {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        .btn-primary:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ“‹ Result Display Example</h1>
        <p>Demonstration of the ResultDisplay component for showing execution results and logs.</p>
        
        <div id="result" style="height: 300px; border: 1px solid #ddd; border-radius: 4px;"></div>
        
        <div class="controls">
            <button onclick="showValue()">Show Value</button>
            <button onclick="showError()">Show Error</button>
            <button onclick="showLog()">Show Log</button>
            <button onclick="showWarning()">Show Warning</button>
            <button class="btn-primary" onclick="clearResults()">Clear</button>
        </div>
    </div>

    <script src="../explorer.js"></script>
    <script>
        let result = null;

        document.addEventListener('DOMContentLoaded', () => {
            result = WalkerExplorer.createResultDisplay('#result', {
                height: '280px',
                showTimestamps: true,
                showCopyButton: true
            });
            
            // Add initial welcome message
            result.addResult({
                type: 'value',
                content: { 
                    message: 'Welcome to ResultDisplay!',
                    timestamp: new Date().toISOString(),
                    status: 'ready'
                },
                timestamp: Date.now()
            });
            
            window.result = result;
        });

        window.showValue = () => {
            result.addResult({
                type: 'value',
                content: {
                    event: 'product_view',
                    data: {
                        product_id: 'demo-123',
                        product_name: 'Demo Product',
                        price: 99.99,
                        currency: 'USD'
                    },
                    context: {
                        page: '/products/demo',
                        user_agent: navigator.userAgent.substring(0, 50) + '...'
                    }
                },
                timestamp: Date.now()
            });
        };

        window.showError = () => {
            result.addResult({
                type: 'error',
                content: {
                    name: 'ValidationError',
                    message: 'Required field "product_id" is missing',
                    stack: 'ValidationError: Required field "product_id" is missing\n    at validateProduct (demo.js:42:10)\n    at handleEvent (demo.js:15:5)',
                    code: 'MISSING_FIELD'
                },
                timestamp: Date.now()
            });
        };

        window.showLog = () => {
            result.addResult({
                type: 'log',
                content: {
                    level: 'info',
                    message: 'Event successfully processed and sent to destinations',
                    details: {
                        event_id: 'evt_' + Math.random().toString(36).substr(2, 9),
                        destinations: ['Google Analytics 4', 'Meta Pixel'],
                        processing_time_ms: 23,
                        batch_size: 1
                    }
                },
                timestamp: Date.now()
            });
        };

        window.showWarning = () => {
            result.addResult({
                type: 'warning',
                content: {
                    message: 'Destination "Facebook Pixel" responded with deprecation warning',
                    details: {
                        warning_code: 'DEPRECATED_API',
                        suggestion: 'Migrate to Meta Conversions API for better reliability',
                        documentation: 'https://developers.facebook.com/docs/marketing-api/conversions-api',
                        affected_events: ['purchase', 'add_to_cart']
                    },
                    severity: 'medium'
                },
                timestamp: Date.now()
            });
        };

        window.clearResults = () => {
            result.clear();
            console.log('Results cleared');
        };
    </script>
</body>
</html>