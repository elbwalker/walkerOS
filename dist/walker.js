!function(){"use strict";function e(e){return function(...t){try{return e(...t)}catch(e){return void console.error("walker",e)}}}function t(e,t=";"){if(!e)return[];const n=new RegExp(`(?:[^${t}']+|'[^']*')+`,"ig");return e.match(n)||[]}function n(e){const[t,n]=e.split(/:(.+)/,2);return[i(t),i(n)]}function r(e){const[t,n]=e.split("(",2);return[t,n?n.slice(0,-1):""]}function i(e){return e?e.trim().replace(/^'|'$/g,"").trim():""}function o(e,t){return e.getAttribute(t)||""}function c(e,t={}){return Object.entries(t).forEach((([n,r])=>{const i=e[n];Array.isArray(i)&&Array.isArray(r)&&(t[n]=r.reduce(((e,t)=>e.includes(t)?e:[...e,t]),[...i]))})),{...e,...t}}function s(e){return{}.hasOwnProperty.call(e,"callee")}function a(e){const t=getComputedStyle(e);if("none"===t.display)return!1;if("visible"!==t.visibility)return!1;if(t.opacity&&Number(t.opacity)<.1)return!1;let n;const r=window.innerHeight,i=e.getBoundingClientRect(),o=i.height,c=i.y,s=c+o,a={x:i.x+e.offsetWidth/2,y:i.y+e.offsetHeight/2};if(o<=r){if(e.offsetWidth+i.width===0||e.offsetHeight+i.height===0)return!1;if(a.x<0)return!1;if(a.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(a.y<0)return!1;if(a.y>(document.documentElement.clientHeight||window.innerHeight))return!1;n=document.elementFromPoint(a.x,a.y)}else{const e=r/2;if(c<0&&s<e)return!1;if(s>r&&c>e)return!1;n=document.elementFromPoint(a.x,r/2)}if(n)do{if(n===e)return!0}while(n=n.parentElement);return!1}function u(e){if("true"===e)return!0;if("false"===e)return!1;const t=Number(e);return e==t&&""!==e?t:String(e)}function f(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function l(e){const i={};return t(e).forEach((e=>{let[t,o]=n(e);const[c,s]=r(t);if(!c)return;let[a,u]=r(o||"");a=a||c,i[c]||(i[c]=[]),i[c].push({trigger:c,triggerParams:s,action:a,actionParams:u})})),i}function d(e,t){const n=o(t,h(e));if(!n)return null;const r=`[${h(e,n)}]`;let[i,s]=g(t,r,e,n);t.querySelectorAll(r).forEach((t=>{i=c(i,p(e,t,n))}));const a=[];return t.querySelectorAll(`[${h(e)}]`).forEach((t=>{const n=d(e,t);n&&a.push(n)})),{type:n,data:i,context:s,nested:a}}function g(e,t,n,r){let i={},o={},s=e;const a=`[${h(n,"context",!1)}]`;let u=0;for(;s;)s.matches(t)&&(i=c(p(n,s,r),i)),s.matches(a)&&(Object.entries(p(n,s,"context",!1)).forEach((([e,t])=>{o[e]||(o[e]=[t,u])})),++u),s=s.parentElement;return[i,o]}function h(e,t,n=!0){return e+(t?(n?"-":"")+t:"")}function p(e,r,i,c=!0){return t(o(r,h(e,i,c))||"").reduce(((e,t)=>{let[i,o]=n(t);if(!i)return e;if(o||(":"===i.charAt(i.length-1)&&(i=i.slice(0,-1)),o=""),"#"===o.charAt(0)){o=o.substring(1);try{let e=r[o];e||"selected"!==o||(e=r.options[r.selectedIndex].text),e&&(o=e)}catch(e){o=""}}return"[]"===i.slice(-2)?(i=i.slice(0,-2),Array.isArray(e[i])||(e[i]=[]),e[i].push(u(o))):e[i]=u(o),e}),{})}let m,b,w=[];function y(e,t){const n=()=>{e(t)};"loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n)}function v(e){e.config.pageview&&function(e){const t=window.location,n={domain:t.hostname,title:document.title,referrer:document.referrer};t.search&&(n.search=t.search),t.hash&&(n.hash=t.hash),e.config.elbLayer.push("page view",n,"load")}(e),x(e)}function E(t){document.addEventListener("click",e((function(e){L.call(this,t,e)}))),document.addEventListener("submit",e((function(e){O.call(this,t,e)})))}function x(t,n=document){w=[],m=m||e(S)(t,1e3);const r=h(t.config.prefix,"action",!1);n===document?m&&m.disconnect():k(t,n,r),n.querySelectorAll(`[${r}]`).forEach((e=>k(t,e,r))),w.length&&function(e){const t=(e,t)=>e.filter((([e,n])=>{const r=window.scrollY+window.innerHeight,i=e.offsetTop;if(r<i)return!0;const o=e.clientHeight;return!(100*(1-(i+o-r)/(o||1))>=n&&(A(t,e,"scroll"),1))}));b||(b=function(e,t=1e3){let n;return function(...r){if(!n)return n=setTimeout((()=>{n=0}),t),e(...r)}}((function(){w=t.call(document,w,e)})),document.addEventListener("scroll",b))}(t)}function A(e,n,r){(function(e,n,r="data-elb"){const i=[],c=function(e,t,n){let r=t;for(;r;){const t=l(o(r,h(e,"action",!1)));if(t[n]||"click"!==n)return t[n];r=r.parentElement}return[]}(r,e,n);return c?(c.forEach((o=>{const c=t(o.actionParams||"",",").reduce(((e,t)=>(e[t]=!0,e)),{}),s=function(e,t,n){const r=[];let i=t;for(n=0!==Object.keys(n||{}).length?n:void 0;i;){const t=d(e,i);!t||n&&!n[t.type]||r.push(t),i=i.parentElement}return r}(r,e,c);if(!s.length){const t="page",n=`[${h(r,t)}]`;let[i,o]=g(e,n,r,t);s.push({type:t,data:i,nested:[],context:o})}s.forEach((e=>{i.push({entity:e.type,action:o.action,data:e.data,trigger:n,context:e.context,nested:e.nested})}))})),i):i})(n,r,e.config.prefix).forEach((t=>{e.config.elbLayer.push(`${t.entity} ${t.action}`,t.data,r,t.context,t.nested)}))}function k(t,n,r){const i=n.getAttribute(r);i&&Object.values(l(i)).forEach((r=>r.forEach((r=>{switch(r.trigger){case"hover":!function(t,n){n.addEventListener("mouseenter",e((function(e){e.target instanceof Element&&A(t,e.target,"hover")})))}(t,n);break;case"load":!function(e,t){A(e,t,"load")}(t,n);break;case"pulse":!function(e,t,n=""){setInterval((()=>{document.hidden||A(e,t,"pulse")}),parseInt(n||"")||15e3)}(t,n,r.triggerParams);break;case"scroll":!function(e,t=""){let n=parseInt(t||"")||50;n<0||n>100||w.push([e,n])}(n,r.triggerParams);break;case"visible":!function(e,t){t&&t.observe(e)}(n,m);break;case"wait":!function(e,t,n=""){setTimeout((()=>A(e,t,"wait")),parseInt(n||"")||15e3)}(t,n,r.triggerParams)}}))))}function L(e,t){A(e,t.target,"click")}function O(e,t){A(e,t.target,"submit")}function S(e,t=1e3){if(window.IntersectionObserver)return new window.IntersectionObserver((n=>{n.forEach((n=>{const r=n.target,i="elbTimerId";let o=Number(r.dataset[i]);if(n.intersectionRatio>0&&(r.offsetHeight>window.innerHeight&&a(r)||n.intersectionRatio>=.5))return o=o||window.setTimeout((function(){a(r)&&(A(e,r,"visible"),delete r.dataset[i],m&&m.unobserve(r))}),t),void(r.dataset[i]=String(o));o&&(clearTimeout(o),delete r.dataset[i])}))}),{rootMargin:"0px",threshold:[0,.1,.2,.3,.4,.5]})}let $,j;const q=document.querySelector("script.elbwalker");q&&($=!!q.getAttribute("data-default"),j=parseInt(q.getAttribute("data-version")||"1"));const H=function(t={}){const n=[],r="walker run",i=t.globals||{},o={push:function(e,t,i,c,s){if(!e||"string"!=typeof e)return;if(!d&&e!=r)return;const[l,h]=e.split(" ");if(!l||!h)return;if("walker"===l)return void function(e,t,r){switch(t){case"config":f(r)&&(e.config=w(r,e.config));break;case"consent":f(r)&&function(e,t){let r=!1;if(Object.entries(t).forEach((([t,n])=>{const i=!!n;e.config.consent[t]=i,r=r||i})),r){const t=e.config;n.forEach((n=>{let r=n.queue||[];n.queue=r.filter((r=>(r.consent=t.consent,r.globals=t.globals,r.user=t.user,!g(e,n,r,!1))))}))}}(e,r);break;case"destination":f(r)&&b(r);break;case"init":(Array.isArray(r)?r:[r||document]).forEach((t=>{(function(e){return e===document||e instanceof HTMLElement})(t)&&x(e,t)}));break;case"run":y(m,e);break;case"user":f(r)&&function(e,t){const n=e.config.user;t.id&&(n.id=t.id),t.device&&(n.device=t.device),t.session&&(n.session=t.session)}(e,r)}}(o,h,t);t=t||{},"page"===l&&(t.id=t.id||window.location.pathname),++a;const p=o.config,v=Date.now(),E=Math.round(performance.now()/10)/100,A=`${v}-${u}-${a}`,k={type:1,id:window.location.href,previous_id:document.referrer};n.forEach((n=>{const r={event:e,data:Object.assign({},t),context:Object.assign({},c),globals:Object.assign({},p.globals),user:Object.assign({},p.user),nested:s||[],consent:Object.assign({},p.consent),id:A,trigger:i||"",entity:l,action:h,timestamp:v,timing:E,group:u,count:a,version:{config:p.version,walker:1.6},source:k};g(o,n,r)}))},config:w(t)};let a=0,u="",l=!0,d=!1;function g(t,n,r,i=!0){if(!function(e,t){let n=!0;const r=t.config.consent;if(r){n=!1;const t=e.config.consent;Object.keys(r).forEach((e=>{t[e]&&(n=!0)}))}return n}(t,n))return i&&(n.queue=n.queue||[],n.queue.push(r)),!1;let o;const c=n.config.mapping;if(c){const e=c[r.entity]||c["*"]||{};if(o=e[r.action]||e["*"],o){if(o.ignore)return!1;o.name&&(r.event=o.name)}if(!o)return!1}return!!e((()=>{if(n.init&&!n.config.init){const e=n.init(n.config);if(n.config.init=e,!e)return!1}return n.push(r,n.config,o),!0}))()}function m(t){d=!0,a=0,u=Math.random().toString(36).slice(2,8),t.config.globals=c(i,function(e){const t=`[${h(e,"globals",!1)}]`;let n={};return document.querySelectorAll(t).forEach((t=>{n=c(n,p(e,t,"globals",!1))})),n}(t.config.prefix)),n.forEach((e=>{e.queue=[]})),l&&(l=!1,function(e){const t=[],n=[];let i=!0;e.config.elbLayer.map((e=>{let[o,c,s,a,u]=[...Array.from(e)];({}).hasOwnProperty.call(o,"callee")&&([o,c,s,a,u]=[...Array.from(o)]),"string"==typeof o&&(i&&o==r?i=!1:o.startsWith("walker ")?t.push([o,c,s,a,u]):n.push([o,c,s,a,u]))})),t.concat(n).map((t=>{const[n,r,i,o,c]=t;e.push(String(n),r,i,o,c)}))}(t)),e(v)(t)}function b(e){if(!e.push)return;const t={init:e.init,push:e.push,config:e.config||{init:!1}};n.push(t)}function w(e,t={}){return{consent:e.consent||t.consent||{},elbLayer:e.elbLayer||t.elbLayer||(window.elbLayer=window.elbLayer||[]),globals:c(i,c(t.globals||{},e.globals||{})),pageview:"pageview"in e?!!e.pageview:t.pageview||!0,prefix:e.prefix||t.prefix||"data-elb",user:e.user||t.user||{},version:e.version||t.version||0}}return function(e){const t=e.config.elbLayer;t.push=function(t,n,r,i,o){return s(t)&&([t,n,r,i,o]=[...Array.from(t)]),e.push(String(t),n,String(r),i,o),Array.prototype.push.apply(this,[arguments])},t.find((e=>(e=s(e)?e[0]:e)==r))&&y(m,e)}(o),t.default&&(window.dataLayer=window.dataLayer||[],b({config:{},push:e=>{window.dataLayer.push({...e,walker:!0})}}),y(m,o)),E(o),o}({default:$,version:j});window.elbwalker=H,window.elb=function(){(window.elbLayer=window.elbLayer||[]).push(arguments)}}();