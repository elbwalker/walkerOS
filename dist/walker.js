!function(){"use strict";function e(e,t={}){return Object.entries(t).forEach((([n,r])=>{const i=e[n];Array.isArray(i)&&Array.isArray(r)&&(t[n]=r.reduce(((e,t)=>e.includes(t)?e:[...e,t]),[...i]))})),{...e,...t}}function t(e){if("true"===e)return!0;if("false"===e)return!1;const t=Number(e);return e==t&&""!==e?t:String(e)}function n(e,t){return e.getAttribute(t)||""}function r(e){const t=getComputedStyle(e);if("none"===t.display)return!1;if("visible"!==t.visibility)return!1;if(t.opacity&&Number(t.opacity)<.1)return!1;let n;const r=window.innerHeight,i=e.getBoundingClientRect(),o=i.height,c=i.y,s=c+o,a={x:i.x+e.offsetWidth/2,y:i.y+e.offsetHeight/2};if(o<=r){if(e.offsetWidth+i.width===0||e.offsetHeight+i.height===0)return!1;if(a.x<0)return!1;if(a.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(a.y<0)return!1;if(a.y>(document.documentElement.clientHeight||window.innerHeight))return!1;n=document.elementFromPoint(a.x,a.y)}else{const e=r/2;if(c<0&&s<e)return!1;if(s>r&&c>e)return!1;n=document.elementFromPoint(a.x,r/2)}if(n)do{if(n===e)return!0}while(n=n.parentElement);return!1}function i(e){return e?e.trim().replace(/^'|'$/g,"").trim():""}function o(e){return function(...t){try{return e(...t)}catch(e){return void console.error("walker",e)}}}function c(e,t,n=!0){return e+(t?(n?"-":"")+t:"")}function s(e,r,i,o=!0){return l(n(r,c(e,i,o))||"").reduce(((e,n)=>{let[i,o]=d(n);if(!i)return e;if(o||(":"===i.charAt(i.length-1)&&(i=i.slice(0,-1)),o=""),"#"===o.charAt(0)){o=o.substring(1);try{let e=r[o];e||"selected"!==o||(e=r.options[r.selectedIndex].text),e&&(o=e)}catch(e){o=""}}return"[]"===i.slice(-2)?(i=i.slice(0,-2),Array.isArray(e[i])||(e[i]=[]),e[i].push(t(o))):e[i]=t(o),e}),{})}function a(e){const t={};return l(e).forEach((e=>{let[n,r]=d(e);const[i,o]=g(n);if(!i)return;let[c,s]=g(r||"");c=c||i,t[i]||(t[i]=[]),t[i].push({trigger:i,triggerParams:o,action:c,actionParams:s})})),t}function u(t,r){const i=n(r,c(t));if(!i)return null;const o=`[${c(t,i)}]`;let[a,l]=f(r,o,t,i);r.querySelectorAll(o).forEach((n=>{a=e(a,s(t,n,i))}));const d=[];return r.querySelectorAll(`[${c(t)}]`).forEach((e=>{const n=u(t,e);n&&d.push(n)})),{type:i,data:a,context:l,nested:d}}function f(t,n,r,i){let o={},a={},u=t;const f=`[${c(r,"context",!1)}]`;let l=0;for(;u;)u.matches(n)&&(o=e(s(r,u,i),o)),u.matches(f)&&(Object.entries(s(r,u,"context",!1)).forEach((([e,t])=>{a[e]||(a[e]=[t,l])})),++l),u=u.parentElement;return[o,a]}function l(e,t=";"){if(!e)return[];const n=new RegExp(`(?:[^${t}']+|'[^']*')+`,"ig");return e.match(n)||[]}function d(e){const[t,n]=e.split(/:(.+)/,2);return[i(t),i(n)]}function g(e){const[t,n]=e.split("(",2);return[t,n?n.slice(0,-1):""]}let h,p,m=[];function w(e,t){const n=()=>{e(t)};"loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n)}function y(e){e.config.pageview&&function(e){const t=window.location,n={domain:t.hostname,title:document.title,referrer:document.referrer};t.search&&(n.search=t.search),t.hash&&(n.hash=t.hash),e.config.elbLayer.push("page view",n,"load")}(e),v(e)}function b(e){document.addEventListener("click",o((function(t){k.call(this,e,t)}))),document.addEventListener("submit",o((function(t){A.call(this,e,t)})))}function v(e,t=document){m=[],h=h||o(L)(e,1e3);const n=c(e.config.prefix,"action",!1);t===document?h&&h.disconnect():x(e,t,n),t.querySelectorAll(`[${n}]`).forEach((t=>x(e,t,n))),m.length&&function(e){const t=(e,t)=>e.filter((([e,n])=>{const r=window.scrollY+window.innerHeight,i=e.offsetTop;if(r<i)return!0;const o=e.clientHeight;return!(100*(1-(i+o-r)/(o||1))>=n&&(E(t,e,"scroll"),1))}));p||(p=function(e,t=1e3){let n;return function(...r){if(!n)return n=setTimeout((()=>{n=0}),t),e(...r)}}((function(){m=t.call(document,m,e)})),document.addEventListener("scroll",p))}(e)}function E(e,t,r){(function(e,t,r="data-elb"){const i=[],o=function(e,t,r){let i=t;for(;i;){const t=a(n(i,c(e,"action",!1)));if(t[r]||"click"!==r)return t[r];i=i.parentElement}return[]}(r,e,t);return o?(o.forEach((n=>{const o=l(n.actionParams||"",",").reduce(((e,t)=>(e[t]=!0,e)),{}),s=function(e,t,n){const r=[];let i=t;for(n=0!==Object.keys(n||{}).length?n:void 0;i;){const t=u(e,i);!t||n&&!n[t.type]||r.push(t),i=i.parentElement}return r}(r,e,o);if(!s.length){const t="page",n=`[${c(r,t)}]`;let[i,o]=f(e,n,r,t);s.push({type:t,data:i,nested:[],context:o})}s.forEach((e=>{i.push({entity:e.type,action:n.action,data:e.data,trigger:t,context:e.context,nested:e.nested})}))})),i):i})(t,r,e.config.prefix).forEach((t=>{e.config.elbLayer.push(`${t.entity} ${t.action}`,t.data,r,t.context,t.nested)}))}function x(e,t,r){const i=n(t,r);i&&Object.values(a(i)).forEach((n=>n.forEach((n=>{switch(n.trigger){case"hover":!function(e,t){t.addEventListener("mouseenter",o((function(t){t.target instanceof Element&&E(e,t.target,"hover")})))}(e,t);break;case"load":!function(e,t){E(e,t,"load")}(e,t);break;case"pulse":!function(e,t,n=""){setInterval((()=>{document.hidden||E(e,t,"pulse")}),parseInt(n||"")||15e3)}(e,t,n.triggerParams);break;case"scroll":!function(e,t=""){let n=parseInt(t||"")||50;n<0||n>100||m.push([e,n])}(t,n.triggerParams);break;case"visible":!function(e,t){t&&t.observe(e)}(t,h);break;case"wait":!function(e,t,n=""){setTimeout((()=>E(e,t,"wait")),parseInt(n||"")||15e3)}(e,t,n.triggerParams)}}))))}function k(e,t){E(e,t.target,"click")}function A(e,t){E(e,t.target,"submit")}function L(e,t=1e3){if(window.IntersectionObserver)return new window.IntersectionObserver((n=>{n.forEach((n=>{const i=n.target,o="elbTimerId";let c=Number(i.dataset[o]);if(n.intersectionRatio>0&&(i.offsetHeight>window.innerHeight&&r(i)||n.intersectionRatio>=.5))return c=c||window.setTimeout((function(){r(i)&&(E(e,i,"visible"),delete i.dataset[o],h&&h.unobserve(i))}),t),void(i.dataset[o]=String(c));c&&(clearTimeout(c),delete i.dataset[o])}))}),{rootMargin:"0px",threshold:[0,.1,.2,.3,.4,.5]})}let S,O;const $=document.querySelector("script.elbwalker");$&&(S=!!n($,"data-default"),O=parseInt(n($,"data-version")||"1"));const q=function(t={}){const n=[],r="walker run",i=t.globals||{},a={push:function(e,t,i="",o={},c=[]){if(!e||"string"!=typeof e)return;if(!d&&e!=r)return;const[s,l]=e.split(" ");if(!s||!l)return;if("walker"===s)return void function(e,t,r,i){switch(t){case"config":x(r)&&(e.config=m(r,e.config));break;case"consent":x(r)&&function(e,t){let r=!1;if(Object.entries(t).forEach((([t,n])=>{const i=!!n;e.config.consent[t]=i,r=r||i})),r){const t=e.config;n.forEach((n=>{let r=n.queue||[];n.queue=r.filter((r=>(r.consent=t.consent,r.globals=t.globals,r.user=t.user,!k(e,n,r,!1))))}))}}(e,r);break;case"destination":x(r)&&p(e,r,i);break;case"init":(Array.isArray(r)?r:[r||document]).forEach((t=>{(function(e){return e===document||e instanceof HTMLElement})(t)&&v(e,t)}));break;case"run":w(A,e);break;case"user":x(r)&&function(e,t){const n=e.config.user;t.id&&(n.id=t.id),t.device&&(n.device=t.device),t.session&&(n.session=t.session)}(e,r)}}(a,l,t,i);t=t||{},"page"===s&&(t.id=t.id||window.location.pathname),++u;const y=a.config,b=Date.now(),E=Math.round((performance.now()-h)/10)/100,L=`${b}-${f}-${u}`,S={type:1,id:window.location.href,previous_id:document.referrer},O={event:e,data:t,context:o,globals:y.globals,user:y.user,nested:c,consent:y.consent,id:L,trigger:i,entity:s,action:l,timestamp:b,timing:E,group:f,count:u,version:{config:y.version,walker:1.6},source:S};g.push(O),n.forEach((e=>{k(a,e,O)}))},config:m(t)};let u=0,f="",l=!0,d=!1,g=[],h=0;function p(e,t,r){if(!t.push)return;const i=r||t.config||{init:!1},o={init:t.init,push:t.push,config:i};!1!==i.queue&&g.forEach((t=>{k(e,o,t)})),n.push(o)}function m(t,n={}){return{consent:t.consent||n.consent||{},elbLayer:t.elbLayer||n.elbLayer||(window.elbLayer=window.elbLayer||[]),globals:e(i,e(n.globals||{},t.globals||{})),pageview:"pageview"in t?!!t.pageview:n.pageview||!0,prefix:t.prefix||n.prefix||"data-elb",user:t.user||n.user||{},version:t.version||n.version||0}}function E(e){return{}.hasOwnProperty.call(e,"callee")}function x(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function k(e,t,n,r=!0){if(n=JSON.parse(JSON.stringify(n)),!function(e,t){let n=!0;const r=t.config.consent;if(r){n=!1;const t=e.config.consent;Object.keys(r).forEach((e=>{t[e]&&(n=!0)}))}return n}(e,t))return r&&(t.queue=t.queue||[],t.queue.push(n)),!1;let i;const c=t.config.mapping;if(c){const e=c[n.entity]||c["*"]||{};if(i=e[n.action]||e["*"],i){if(i.ignore)return!1;i.name&&(n.event=i.name)}if(!i)return!1}return!!o((()=>{if(t.init&&!t.config.init){const e=t.init(t.config);if(t.config.init=e,!e)return!1}return t.push(n,t.config,i),!0}))()}function A(t){d=!0,u=0,f=function(e=6){for(var t="";t.length<e;)t+=(36*Math.random()|0).toString(36);return t}(),g=[],t.config.globals=e(i,function(t){const n=`[${c(t,"globals",!1)}]`;let r={};return document.querySelectorAll(n).forEach((n=>{r=e(r,s(t,n,"globals",!1))})),r}(t.config.prefix)),n.forEach((e=>{e.queue=[]})),l?(l=!1,function(e){const t=[],n=[];let i=!0;e.config.elbLayer.map((e=>{let[o,c,s,a,u]=[...Array.from(e)];({}).hasOwnProperty.call(o,"callee")&&([o,c,s,a,u]=[...Array.from(o)]),"string"==typeof o&&(i&&o==r?i=!1:o.startsWith("walker ")?t.push([o,c,s,a,u]):n.push([o,c,s,a,u]))})),t.concat(n).map((t=>{const[n,r,i,o,c]=t;e.push(String(n),r,i,o,c)}))}(t)):h=performance.now(),o(y)(t)}return function(e){const t=e.config.elbLayer;t.push=function(t,n,r,i,o){return E(t)&&([t,n,r,i,o]=[...Array.from(t)]),e.push(String(t),n,String(r),i,o),Array.prototype.push.apply(this,[arguments])},t.find((e=>(e=E(e)?e[0]:e)==r))&&w(A,e)}(a),t.default&&(window.dataLayer=window.dataLayer||[],p(a,{config:{},push:e=>{window.dataLayer.push({...e,walker:!0})}}),w(A,a)),b(a),a}({default:S,version:O});window.elbwalker=q,window.elb=function(){(window.elbLayer=window.elbLayer||[]).push(arguments)}}();