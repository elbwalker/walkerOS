---
title: walker.js
description: Ready-to-use walkerOS bundle for instant web tracking
sidebar_position: 1
package: '@walkeros/walker.js'
---

import * as schemas from '@walkeros/walker.js/src/dev';

# walker.js

Walker.js is a pre-built walkerOS application that combines both the
[browser](/docs/sources/web/browser/) and
[dataLayer](/docs/sources/web/dataLayer/) sources with the
[collector](/docs/collector/) and a default `dataLayer` destination into a
pre-build package. It's designed for users who want instant web tracking without
complex setup or configuration.

## Installation

### Option 1: npm package

<CodeSnippet
  code={`npm install @walkeros/walker.js`}
  language="bash"
/>

### Option 2: CDN

<CodeSnippet
  code={`<script
  async
  data-elbconfig="elbConfig"
  src="https://cdn.jsdelivr.net/npm/@walkeros/walker.js@latest/dist/walker.js"
></script>`}
  language="html"
/>

## Basic setup

### 1. Add event queueing (recommended)

Add this script before walker.js loads to queue events during initialization:

<CodeSnippet
  code={`<script>
  function elb() {
    (window.elbLayer = window.elbLayer || []).push(arguments);
  }
</script>`}
  language="html"
/>

### 2. Include walker.js

<CodeSnippet
  code={`<script async data-elbconfig="elbConfig" src="./walker.js"></script>`}
  language="html"
/>

### 3. Configure destinations

<CodeSnippet
  code={`<script>
  window.elbConfig = {
    collector: {
      destinations: {
        console: {
          push: (event) => console.log('Event:', event),
        },
        api: {
          push: async (event) => {
            await fetch('/api/events', {
              method: 'POST',
              body: JSON.stringify(event),
            });
          },
        },
      },
    },
  };
</script>`}
  language="html"
/>

## Configuration options

Walker.js supports multiple configuration approaches with different priorities:

1. **Script tag `data-elbconfig`** (highest priority)
2. **`window.elbConfig`** (default fallback)
3. **Manual initialization** (when `run: false`)

### Settings

<PropertyTable schema={schemas.settings} />

#### Browser source settings

<PropertyTable schema={schemas.browserConfig} />

#### DataLayer settings

<PropertyTable schema={schemas.dataLayerConfig} />

#### Collector settings

<PropertyTable schema={schemas.collectorConfig} />

### Full configuration object

<CodeSnippet
  code={`window.elbConfig = {
  // Global settings
  elb: 'elb', // Global function name (default: 'elb')
  name: 'walkerjs', // Global instance name
  run: true, // Auto-initialize (default: true)

  // Browser source settings
  browser: {
    run: true, // Auto-start DOM tracking
    session: true, // Enable session tracking
    scope: document.body, // Tracking scope
    pageview: true, // Enable automatic page views
  },

  // DataLayer integration
  dataLayer: true, // Enable dataLayer
  // or detailed config:
  // dataLayer: {
  //   name: 'dataLayer', // DataLayer variable name
  //   prefix: 'dataLayer', // Event prefix
  // },

  // Collector configuration
  collector: {
    consent: { functional: true }, // Default consent state
    destinations: {
      // Your destinations here
      console: {
        push: (event) => console.log('Event:', event),
      },
    },
  },
};`}
  language="javascript"
/>

### Inline configuration

Configure directly in the script tag using simple key:value pairs:

<CodeSnippet
  code={`<script
  async
  data-elbconfig="elb:track;run:true;instance:myWalker"
  src="./walker.js"
></script>`}
  language="html"
/>

### Named configuration object

Use a custom configuration object name:

<CodeSnippet
  code={`<script>
  window.trackingConfig = {
    elb: 'track',
    collector: {
      destinations: {
        // Your destinations
      },
    },
  };
</script>
<script async data-elbconfig="trackingConfig" src="./walker.js"></script>`}
  language="html"
/>

## Usage

### Automatic DOM tracking

Walker.js automatically tracks events based on HTML data attributes:

<CodeSnippet
  code={`<!-- Product tracking -->
<div data-elb="product" data-elb-product="id:123;name:Blue T-Shirt;price:29.99">
  <button data-elbaction="click:add">Add to Cart</button>
</div>

<!-- Global properties -->
<div data-elbglobals="pagetype:product_detail"></div>

<!-- Context information -->
<div data-elbcontext="section:recommendations"></div>`}
  language="html"
/>

For detailed information on data attributes, see the
[Browser Source documentation](/docs/sources/web/browser/tagging/html-attributes).

### Manual event tracking

Use the global `elb` function for manual tracking:

<CodeSnippet
  code={`// Simple event
elb('button click', {
label: 'interesting',
});`}
  language="javascript"
/>

### DataLayer integration

Walker.js can integrate with existing dataLayer implementations:

<CodeSnippet
  code={`// Enable dataLayer integration
window.elbConfig = {
dataLayer: true, // Uses window.dataLayer by default
};

// Existing dataLayer events will be processed
dataLayer.push({
event: 'purchase',
ecommerce: {
transaction_id: '12345',
value: 25.42,
},
});`}
  language="javascript"
/>

## Advanced features

### Async loading and event queueing

Walker.js handles async loading gracefully with automatic event queueing:

<CodeSnippet
  code={`<script>
  // 1. Define elb function to queue events
  function elb() {
    (window.elbLayer = window.elbLayer || []).push(arguments);
  }

  // 2. Track events immediately (even before walker.js loads)
  elb('product view', { id: '123', name: 'Blue T-Shirt' });
</script>

<!-- 3. Walker.js processes queued events when it loads -->
<script async data-elbconfig="elbConfig" src="./walker.js"></script>`}
  language="html"
/>

### Build variants

Walker.js provides multiple build formats for different environments:

* `walker.js` - Standard IIFE bundle for browsers
* `index.es5.js` - GTM-compatible ES2015 build
* `index.mjs` - ES modules for modern bundlers
* `index.js` - CommonJS for Node.js environments

### Programmatic usage

Use walker.js programmatically in applications:

<CodeSnippet
  code={`import { createWalkerjs } from '@walkeros/walker.js';

const { collector, elb } = await createWalkerjs({
collector: {
destinations: {
console: { push: console.log },
},
},
browser: {
session: true,
pageview: true,
},
});`}
  language="javascript"
/>

## Destination configuration

Configure multiple destinations for your events:

<CodeSnippet
  code={`window.elbConfig = {
collector: {
destinations: {
// Console logging for development
console: {
  push: (event) => console.log('Walker.js Event:', event),
},

// Custom API endpoint
api: {
  push: async (event) => {
    await fetch('/api/events', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(event),
    });
  },
},
},
},
};`}
  language="javascript"
/>

For comprehensive destination options, see the
[Destinations documentation](/docs/destinations/).

## Growing beyond walker.js

Walker.js is a **convenience bundle** that combines Browser Source, DataLayer Source, and Collector into a single file. It's perfect for getting started, but you may outgrow it.

### When to stay with walker.js

- ✅ Simple tracking needs (pageviews, clicks, forms)
- ✅ Static sites or traditional server-rendered pages
- ✅ Quick proof-of-concept or MVP
- ✅ Teams who prefer minimal setup

### When to upgrade

Consider moving to full [Integrated](/docs/getting-started/modes/integrated) or [Bundled](/docs/getting-started/modes/bundled) mode when you need:

| Need | Solution |
|------|----------|
| Server-side tracking | Bundled mode with Docker |
| Custom sources (HTTP, AWS, GCP) | Both modes support server sources |
| Multiple flows per page | Full Collector configuration |
| TypeScript integration | Integrated mode |
| CI/CD versioned configs | Bundled mode |
| Event mapping/transformation | Both modes with mapping config |

### Migration path

Walker.js configuration maps directly to full modes:

<Tabs groupId="mode">
  <TabItem value="integrated" label="Integrated">

```typescript
// walker.js equivalent in Integrated mode
import { startFlow } from '@walkeros/collector';
import { sourceBrowser } from '@walkeros/web-source-browser';

const { elb } = await startFlow({
  sources: {
    browser: {
      code: sourceBrowser,
      config: { settings: { pageview: true, session: true } },
    },
  },
  destinations: {
    // Your destinations here
  },
  run: true,
});
```

  </TabItem>
  <TabItem value="bundled" label="Bundled">

```json
// walker.js equivalent in Bundled mode (flow.json)
{
  "version": 1,
  "flows": {
    "default": {
      "web": {},
      "sources": {
        "browser": {
          "package": "@walkeros/web-source-browser",
          "config": { "settings": { "pageview": true, "session": true } }
        }
      },
      "destinations": {
        // Your destinations here
      },
      "collector": { "run": true }
    }
  }
}
```

  </TabItem>
</Tabs>

The mental model is the same—sources, collector, destinations—just with more control.

## Troubleshooting

### Common issues

**Events not firing:** Check that walker.js loaded and configuration is valid.

**Missing events:** Ensure event queueing function is added before walker.js.

**Configuration not applied:** Verify `data-elbconfig` points to the correct
object name.

## API reference

### Factory function

<CodeSnippet code={`createWalkerjs(config?: Config): Promise<Instance>`} language="typescript" />

Creates a new walker.js instance with the provided configuration.

### Instance properties

* `collector` - The walkerOS collector instance
* `elb` - Browser push function for event tracking

### Utility functions

<CodeSnippet
  code={`import { getAllEvents, getEvents, getGlobals } from '@walkeros/walker.js';

// Get all trackable events on the page
const events = getAllEvents();

// Get events for a specific element and trigger
const button = document.querySelector('button');
const clickEvents = getEvents(button, 'click');

// Get global properties from the page
const globals = getGlobals();`}
  language="javascript"
/>

## Related documentation

* **[Browser Source](/docs/sources/web/browser/)** - Detailed DOM tracking
  capabilities
* **[Collector](/docs/collector/)** - Event processing and routing
* **[Destinations](/docs/destinations/)** - Available destination options
* **[DataLayer Source](/docs/sources/web/dataLayer/)** - DataLayer integration
  details

Walker.js combines all these components into a single, easy-to-use package
perfect for getting started with walkerOS quickly.
