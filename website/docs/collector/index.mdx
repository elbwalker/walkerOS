---
title: Collector
description: Unified event collector for web and server environments
path: /docs/collector
package: '@walkeros/collector'
sidebar_position: 2
---

import Link from '@docusaurus/Link';
import { PropertyTable } from '@walkeros/explorer';
import { schemas } from '@walkeros/collector';

export const collectorSchema = schemas.settings;

# Collector

The collector is the central **processing engine** of walkerOS that receives
events from sources, **enriches** them with additional data, applies consent
rules, and **routes** them to destinations. It acts as the **intelligent
middleware** between event capture and event delivery.

#### What it does

The Collector transforms raw events into enriched, compliant data streams by:

- **Event processing** - Validates, normalizes, and enriches incoming events
- **Consent management** - Applies privacy rules and user consent preferences
- **Data enrichment** - Adds session data, user context, and custom properties
- **Destination routing** - Sends processed events to configured analytics
  platforms

#### Key features

- **Compatibility** - Works in both web browsers and server environments
- **Privacy-first** - Built-in consent management and data protection
- **Event validation** - Ensures data quality and consistency
- **Flexible routing** - Send events to multiple destinations simultaneously

#### Role in architecture

In the walkerOS data flow, the collector sits between sources and destinations:

```
Sources → Collector → Destinations
```

Sources capture events and send them to the collector, which processes and
routes them to your chosen destinations like Google Analytics, custom APIs, or
data warehouses.

## Installation

```bash
npm install @walkeros/collector
```

## Basic setup

```typescript
import { startFlow } from '@walkeros/collector';
import { sourceBrowser } from '@walkeros/web-source-browser';

const { collector, elb } = await startFlow({
  run: true,
  consent: { functional: true },
  sources: {
    browser: {
      code: sourceBrowser,
      config: {
        settings: {
          pageview: true,
          session: true,
        },
      },
    },
  },
  destinations: {
    console: {
      code: {
        type: 'console',
        push: (event) => console.log('Event:', event),
      },
    },
  },
});
```

## Configuration reference

<PropertyTable schema={collectorSchema} />

## Advanced setup

```typescript
import { startFlow } from '@walkeros/collector';
import { sourceBrowser } from '@walkeros/web-source-browser';
import { destinationAPI } from '@walkeros/web-destination-api';

const { collector, elb } = await startFlow({
  run: true,
  consent: { functional: true },
  sources: {
    browser: {
      code: sourceBrowser,
      config: {
        settings: {
          pageview: true,
          session: true,
        },
      },
    },
  },
  destinations: {
    api: {
      code: destinationAPI,
      config: {
        settings: {
          url: 'https://analytics.example.com/events',
        },
      },
    },
  },
  verbose: true,
  onError: (error: unknown) => {
    console.error('Collector error:', error);
  },
  onLog: (message: string, level: 'debug' | 'info' | 'warn' | 'error') => {
    console.log(`[${level}] ${message}`);
  },
});
```
