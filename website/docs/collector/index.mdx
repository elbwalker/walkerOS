---
title: Collector
description: Unified event collector for web and server environments
path: /docs/collector
package: '@walkeros/collector'
sidebar_position: 2
---

import Link from '@docusaurus/Link';
import SettingsTable from '@site/src/components/molecules/SettingsTable';

# Collector

The collector is the central **processing engine** of walkerOS that receives
events from sources, **enriches** them with additional data, applies consent
rules, and **routes** them to destinations. It acts as the **intelligent
middleware** between event capture and event delivery.

#### What it does

The Collector transforms raw events into enriched, compliant data streams by:

- **Event processing** - Validates, normalizes, and enriches incoming events
- **Consent management** - Applies privacy rules and user consent preferences
- **Data enrichment** - Adds session data, user context, and custom properties
- **Destination routing** - Sends processed events to configured analytics
  platforms

#### Key features

- **Compatibility** - Works in both web browsers and server environments
- **Privacy-first** - Built-in consent management and data protection
- **Event validation** - Ensures data quality and consistency
- **Flexible routing** - Send events to multiple destinations simultaneously

#### Role in architecture

In the walkerOS data flow, the collector sits between sources and destinations:

```
Sources → Collector → Destinations
```

Sources capture events and send them to the collector, which processes and
routes them to your chosen destinations like Google Analytics, custom APIs, or
data warehouses.

## Installation

```bash
npm install @walkeros/collector
```

## Basic setup

```typescript
import { createCollector } from '@walkeros/collector';

const config = {
  run: true,
  consent: { functional: true },
  sources: [
    // add your event sources
  ]
  },
};

const { collector, elb } = await createCollector(config);

```

## Configuration reference

<SettingsTable
  properties={[
    {
      name: 'dryRun',
      type: 'boolean',
      description: 'Run in dry mode without executing events',
      required: true,
      example: 'false',
    },
    {
      name: 'run',
      type: 'boolean',
      description: 'Whether to run collector automatically',
      required: false,
      example: 'true',
    },
    {
      name: 'consent',
      type: 'Consent',
      description: 'Initial consent state',
      required: false,
      example: '{ analytics: true, marketing: false }',
    },
    {
      name: 'user',
      type: 'User',
      description: 'Initial user data',
      required: false,
      example: "{ id: 'user123', email: 'user@example.com' }",
    },
    {
      name: 'tagging',
      type: 'number',
      description: 'Version for event tagging',
      required: true,
      example: '2',
    },
    {
      name: 'session',
      type: 'false | unknown',
      description: 'Session configuration',
      required: true,
      example: 'false',
    },
    {
      name: 'globals',
      type: 'Properties',
      description: 'Initial global properties',
      required: false,
      example: "{ version: '1.2.3' }",
    },
    {
      name: 'globalsStatic',
      type: 'Properties',
      description: 'Static global properties even on a new run',
      required: true,
      example: "{ environment: 'production' }",
    },
    {
      name: 'sessionStatic',
      type: 'Partial<SessionData>',
      description: 'Static session data even on a new run',
      required: true,
      example: '{ storage: true }',
    },
    {
      name: 'destinations',
      type: 'Destination.InitDestinations',
      description: 'Destination configurations',
      required: false,
      example: '[{ destination, config }]',
    },
    {
      name: 'custom',
      type: 'Properties',
      description: 'Initial custom properties',
      required: false,
      example: "{ experiment: 'variant-a' }",
    },
    {
      name: 'verbose',
      type: 'boolean',
      description: 'Enable verbose logging',
      required: true,
      example: 'false',
    },
    {
      name: 'onError',
      type: 'Handler.Error',
      description: 'Error handler',
      required: false,
      example: '(error) => console.error(error)',
    },
    {
      name: 'onLog',
      type: 'Handler.Log',
      description: 'Log handler',
      required: false,
      example: '(message, level) => console.log(message)',
    },
  ]}
/>
