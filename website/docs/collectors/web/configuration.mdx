---
title: Configuration
sidebar_position: 2
description: How to configure walker.js
---

import Link from '@docusaurus/Link';

There are several configuration options when creating a walker.js instance:

```ts
const walkerjs = Walkerjs({
  consent: {
    functional: true,
  },
  contracts: {
    /* ... */
  },
  settings: {
    foo: 'bar',
  },
  dataLayer: true,
  dataLayerConfig: {
    consent: 'functional',
  },
  default: true,
  destinations: {
    log: {
      type: 'log',
      push: console.log,
    },
  },
  elb: 'elb',
  name: 'walkerjs',
  elbLayer: window.elbLayer,
  globalsStatic: {
    tagged: false,
  },
  hooks: {
    prePush: (params, event) => {
      console.log('prePush', event.event);
      return params.fn(event);
    },
  },
  listeners: false,
  on: {
    run: [(instance) => console.log('run', instance.round)],
  },
  onError: (error) => {
    console.error('web collector', error);
  },
  onLog: (message) => {
    console.log('web source', message);
  },
  pageview: true,
  prefix: 'data-elb',
  run: true,
  scope: document.getElementById('playground'),
  session: {
    storage: true,
    consent: ['analytics', 'marketing'],
    length: 60,
  },
  sessionStatic: { id: 's3ss10n', device: 'd3v3c3' },
  tagging: 1,
  user: { id: '1d', device: 'overruled' },
});
```

| Option          | Type                        | Description                                             |
| --------------- | --------------------------- | ------------------------------------------------------- |
| consent         | object                      | Initial consent states                                  |
| contracts       | object                      | Contract schemas for event validation                   |
| custom          | object                      | Individual custom data                                  |
| dataLayer       | boolean                     | Adds a dataLayer destination if enabled                 |
| dataLayerConfig | object                      | Config for dataLayer destination, e.g. for consent      |
| default         | boolean                     | Add dataLayer destination and run automatically         |
| destinations    | object                      | Destinations that might process the events              |
| elb             | string                      | Name of assign the elb function to the window           |
| name            | string                      | Name of the walker.js collector to assign to the window |
| elbLayer        | object                      | Public elbwalker API for async communication            |
| globalsStatic   | object                      | Static default attributes added to each event           |
| hooks           | object                      | Functions to customize default behavior                 |
| listeners       | boolean                     | Enable/disable automatic event listener registration    |
| on              | object                      | Event listeners for specific walkerOS events            |
| onError         | function                    | Custom error handler                                    |
| onLog           | function                    | Custom logging for the verbose mode                     |
| pageview        | boolean                     | Trigger a page view event by default                    |
| prefix          | string                      | Attributes prefix used by walker                        |
| run             | boolean                     | Automatically start running                             |
| scope           | Document \| Element         | DOM scope to constrain all tracking operations          |
| session         | false or<br />SessionConfig | Configuration for session detection                     |
| sessionStatic   | object                      | Static default session data                             |
| tagging         | number                      | Current version of the tagging                          |
| user            | object                      | Setting the user IDs including id, device, and session  |

:::note

During a run you can still use `globals` and `tagging` to update the
configuration.

:::
