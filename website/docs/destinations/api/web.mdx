---
title: Web
description: Browser-side HTTP API destination with fetch, XHR, and beacon transports
package: '@walkeros/web-destination-api'
path: packages/web/destinations/api
sidebar_position: 1
---

import { getEvent } from '@walkeros/core';
import destinationWebAPI from '@walkeros/web-destination-api';
import { examples, schemas } from '@walkeros/web-destination-api/dev';

export const destination = { ...destinationWebAPI, examples };

# Web API Destination

<PackageLink
  env="web"
  github="packages/web/destinations/api"
  npm="@walkeros/web-destination-api"
/>

The web API destination allows you to send events from the browser to any HTTP
endpoint with customizable data transformation and transport methods.

:::info Where This Fits
Web API is a **web destination** in the walkerOS flow:

<FlowMap
  sources={{ default: { highlight: false } }}
  collector={{ highlight: false }}
  destinations={{ default: { label: 'Destination', text: 'API', highlight: true } }}
/>

Sends events from the browser to any HTTP endpoint using fetch, XHR, or beacon transport with customizable request formatting.
:::

## Installation

<CodeSnippet
  code={`npm install @walkeros/web-destination-api`}
  language="bash"
/>

## Setup

<Tabs groupId="mode">
  <TabItem value="integrated" label="Integrated" default>

<CodeSnippet
  code={`import { startFlow } from '@walkeros/collector';
import { destinationAPI } from '@walkeros/web-destination-api';

const { collector, elb } = await startFlow({
  destinations: {
    api: {
      code: destinationAPI,
      config: {
        settings: {
          url: 'https://api.example.com/events',
        },
      },
    },
  },
});`}
  language="typescript"
/>

  </TabItem>
  <TabItem value="bundled" label="Bundled">

Add to your `flow.json` destinations:

<CodeSnippet
  code={`"destinations": {
  "api": {
    "package": "@walkeros/web-destination-api",
    "config": {
      "settings": {
        "url": "https://api.example.com/events"
      }
    }
  }
}`}
  language="json"
/>

[See Bundled Mode setup →](/docs/getting-started/modes/bundled) | [CLI reference →](/docs/apps/cli)

  </TabItem>
</Tabs>

## Configuration reference

<PropertyTable schema={schemas.settings} />

## Usage

### Basic Usage

<CodeSnippet
  code={`import { startFlow } from '@walkeros/collector';
import { destinationAPI } from '@walkeros/web-destination-api';

const { collector, elb } = await startFlow({
  destinations: {
    api: {
      code: destinationAPI,
      config: {
        settings: {
          url: 'https://api.example.com/events',
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            Authorization: 'Bearer your-token',
          },
        },
      },
    },
  },
});`}
  language="typescript"
/>

### Advanced Usage with Transform

<CodeSnippet
  code={`import { startFlow } from '@walkeros/collector';
import { destinationAPI } from '@walkeros/web-destination-api';

const { collector, elb } = await startFlow({
  destinations: {
    api: {
      code: destinationAPI,
      config: {
        settings: {
          url: 'https://api.example.com/events',
          transport: 'fetch',
          transform: (event, config, mapping) => {
            // Custom transformation logic
            return JSON.stringify({
              timestamp: Date.now(),
              event_name: \`\${event.entity}_\${event.action}\`,
              properties: event.data,
              context: event.context,
            });
          },
        },
      },
    },
  },
});`}
  language="typescript"
/>

## Examples

### Sending to Analytics API

<CodeSnippet
  code={`import { startFlow } from '@walkeros/collector';
import { destinationAPI } from '@walkeros/web-destination-api';

const { collector, elb } = await startFlow({
  destinations: {
    api: {
      code: destinationAPI,
      config: {
        settings: {
          url: 'https://analytics.example.com/track',
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-API-Key': 'your-api-key',
          },
          transform: (event) => {
            return JSON.stringify({
              event_type: \`\${event.entity}_\${event.action}\`,
              user_id: event.user?.id,
              session_id: event.user?.session,
              properties: event.data,
              timestamp: event.timing,
            });
          },
        },
      },
    },
  },
});`}
  language="typescript"
/>

### Using Beacon Transport

For critical events that need to be sent even when the page is unloading:

<CodeSnippet
  code={`// Add to existing startFlow config
const { collector, elb } = await startFlow({
  destinations: {
    criticalApi: {
      code: destinationAPI,
      config: {
        settings: {
          url: 'https://api.example.com/critical-events',
          transport: 'beacon', // Reliable for page unload scenarios
        },
      },
    },
  },
});`}
  language="typescript"
/>

### Custom Data Mapping

Use mapping rules to control which events are sent:

<CodeSnippet
  code={`// Add to existing startFlow config
const { collector, elb } = await startFlow({
  destinations: {
    api: {
      code: destinationAPI,
      config: {
        settings: {
          url: 'https://api.example.com/events',
        },
        mapping: {
          entity: {
            action: {
              data: 'data',
            },
          },
        },
      },
    },
  },
});`}
  language="typescript"
/>

## Transport methods

- **fetch** (default): Modern, promise-based HTTP requests
- **xhr**: Traditional XMLHttpRequest for older browser compatibility
- **beacon**: Uses Navigator.sendBeacon() for reliable data transmission during
  page unload

## Mapping

By default the&nbsp;<Link to="/docs/core/web#sendweb">`sendWeb`</Link> function
is used to send the events to an API.

<DestinationDemo
  destination={destination}
  settings={{
    url: 'https://api.example.com/events',
  }}
  smallText={true}
  height={'128px'}
  event={getEvent()}
  mapping={examples.mapping.entity_action}
  generic={true}
/>
