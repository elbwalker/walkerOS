---
title: Meta Conversion API
description: Meta Conversion API (CAPI) destination for walkerOS
---

import Link from '@docusaurus/Link';
import PackageLink from '@site/src/components/docs/package-link';
import { LiveCode } from '@site/src/components/organisms/liveCode';
import { getEvent } from '@elbwalker/utils';
import { mapping } from '@elbwalker/destination-node-meta/examples';

<PackageLink
  github="packages/destinations/node/meta"
  npm="@elbwalker/destination-node-meta"
/>

The&nbsp;<Link to="https://developers.facebook.com/docs/marketing-api/conversions-api">Meta
Conversion API (CAPI)</Link> destination is used to send server-side events from
walkerOS to the Facebook Conversion API. It handles the data transformation and
ensures that your events are correctly formatted for the Meta Conversion API.

## Dependencies

Before using the Meta destination, ensure you have:

- walkerOS&nbsp;<Link to="/docs/sources/node">node source</Link> installed
- <Link to="https://developers.facebook.com/docs/marketing-api/conversions-api/get-started#requirements">
    Conversion API requirements
  </Link>

## Installation

To get started, install the package via npm:

```sh
npm install @elbwalker/destination-meta
```

## Configuration

#### Example

<LiveCode
  smallText={true}
  labelInput="Configuration"
  disableInput={true}
  input={mapping.InitUserData}
  output={`sendNode('https://graph.facebook.com/v22.0/${mapping.InitUserData.pixelId}/events?access_token=${mapping.InitUserData.accessToken}', {
    data: [
      {
        event_id: "1746576817000-gr0up-1",
        event_time: 1746576817,
        action_source: "website",
        user_data: {
          external_id: [
            "cc8e27118413234d4297ed00a02711365312c79325df9b5b8f4199cbd0b96e7e",
            "9176e6f336dbdb4f99b0e45cbd7e41e0e2323812b236822842a61ffbd362ac8c",
          ],
        },
        event_source_url: "https://localhost:80",
        // ... event data
      },
    ],
  });`}
/>

## Mapping

### Purchase

<LiveCode
  smallText={true}
  height={'512px'}
  disableInput={true}
  labelInput="Event"
  input={getEvent('order complete')}
  disableConfig={true}
  labelConfig="Custom Config"
  config={mapping.Purchase}
  output={`sendNode('https://graph.facebook.com/v22.0/${mapping.InitUserData.pixelId}/events?access_token=${mapping.InitUserData.accessToken}', {
    data: [
      {
        event_name: "Purchase",
        event_id: "1746576817000-gr0up-1",
        event_time: 1746576817,
        action_source: "website",
        order_id: "0rd3r1d",
        currency: "EUR",
        value: 555,
        contents: [
          {
            id: "ers",
            item_price: 420,
            quantity: 1,
          },
          {
            id: "cc",
            item_price: 42,
            quantity: 1,
          },
        ],
        num_items: 2,
        user_data: {
          external_id: [
            "cc8e27118413234d4297ed00a02711365312c79325df9b5b8f4199cbd0b96e7e",
            "9176e6f336dbdb4f99b0e45cbd7e41e0e2323812b236822842a61ffbd362ac8c",
          ],
        },
        event_source_url: "https://localhost:80",
      },
    ],
  });`}
/>

:::info

If you need professional support with your walkerOS implementation, check out
our&nbsp;<Link to="/services">services</Link>.

:::
