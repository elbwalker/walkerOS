---
title: '@elbwalker to @walkerOS'
description: How to migrate from @elbwalker to @walkerOS
position: 1
---

# Migration Guide: From @elbwalker to @walkerOS

This guide helps you migrate from the old elbwalker packages to the new walkerOS
packages. The migration involves package name changes, updated exports, and some
structural reorganization.

## Package Migration Map

### Core Sources/Collectors

| Old Package                  | New Package                  | Migration Notes                           |
| ---------------------------- | ---------------------------- | ----------------------------------------- |
| `@elbwalker/source-walkerjs` | `@walkerOS/web-collector`    | Core web source renamed to "collector"    |
| `@elbwalker/source-node`     | `@walkerOS/server-collector` | Core server source renamed to "collector" |

**Export Changes:**

- Old: `Walkerjs()`, `createSourceWalkerjs()`, `SourceWalkerjs.*`, `Walker.*`
- New: `webCollector()`, `createWebCollector()`, `WebCollector.*`, `elb`

- Old: `sourceNode()`, `createSourceNode()`, `SourceNode.*`
- New: `serverCollector()`, `createServerCollector()`, `ServerCollector.*`

### Web Destinations

| Old Package                             | New Package                            | Key Changes                                             |
| --------------------------------------- | -------------------------------------- | ------------------------------------------------------- |
| `@elbwalker/destination-web-api`        | `@walkerOS/web-destination-api`        | Export: `DestinationWebAPI` → `DestinationAPI`          |
| `@elbwalker/destination-web-google-ga4` | `@walkerOS/web-destination-ga4`        | Export: `DestinationGoogleGA4` → `DestinationGA4`       |
| `@elbwalker/destination-web-google-ads` | `@walkerOS/web-destination-google_ads` | Export: `DestinationGoogleAds` → `DestinationAds`       |
| `@elbwalker/destination-web-google-gtm` | `@walkerOS/web-destination-gtm`        | Export: `DestinationGoogleGTM` → `DestinationGTM`       |
| `@elbwalker/destination-web-meta-pixel` | `@walkerOS/web-destination-meta`       | Export: `DestinationMetaPixel` → `DestinationMetaPixel` |
| `@elbwalker/destination-web-piwikpro`   | `@walkerOS/web-destination-piwikpro`   | Export: `DestinationPiwikPro` → `DestinationPiwikPro`   |
| `@elbwalker/destination-web-plausible`  | `@walkerOS/web-destination-plausible`  | Export: `DestinationPlausible` → `DestinationPlausible` |

### Server Destinations

| Old Package                            | New Package                         | Key Changes                                           |
| -------------------------------------- | ----------------------------------- | ----------------------------------------------------- |
| `@elbwalker/destination-node-aws`      | `@walkerOS/server-destination-aws`  | Export: `DestinationFirehose` → `DestinationFirehose` |
| `@elbwalker/destination-node-bigquery` | `@walkerOS/server-destination-gcp`  | Export: `DestinationBigQuery` → `DestinationBigQuery` |
| `@elbwalker/destination-node-meta`     | `@walkerOS/server-destination-meta` | Export: `DestinationMeta` → `DestinationMeta`         |

### Sources

| Old Package                   | New Package                      | Key Changes                                   |
| ----------------------------- | -------------------------------- | --------------------------------------------- |
| `@elbwalker/source-datalayer` | `@walkerOS/web-source-dataLayer` | Export: `SourceDataLayer` → `SourceDataLayer` |

### Utility Packages

| Old Package         | New Package       | Key Changes                                                                           |
| ------------------- | ----------------- | ------------------------------------------------------------------------------------- |
| `@elbwalker/types`  | `@walkerOS/core` | Merged with utils into unified core package                                          |
| `@elbwalker/utils`  | `@walkerOS/core` | Merged with types into unified core package, bundled with collectors                 |
| `@elbwalker/tagger` | ⚠️ **BUNDLED**    | Now included in `@walkerOS/web-collector`                                             |

### Core Package Migration

The most significant change is the merger of `@walkerOS/types` and `@walkerOS/utils` into `@walkerOS/core`. This unified package provides:

- **Types**: All TypeScript definitions (WalkerOS.Event, Elb interfaces, etc.)
- **Utilities**: Helper functions (isObject, assign, etc.)
- **Core functionality**: Shared logic used across all walkerOS packages

**Important**: The `@walkerOS/core` package is automatically bundled with both `@walkerOS/web-collector` and `@walkerOS/server-collector`, so you typically don't need to install it separately unless you're building custom destinations or need standalone access to types/utils.

## Step-by-Step Migration

### 1. Update Package Dependencies

**Before:**

```json
{
  "dependencies": {
    "@elbwalker/source-walkerjs": "^2.0.0",
    "@elbwalker/destination-web-google-ga4": "^2.0.0",
    "@elbwalker/destination-web-api": "^2.0.0",
    "@elbwalker/tagger": "^2.0.0",
    "@elbwalker/types": "^2.0.0",
    "@elbwalker/utils": "^2.0.0"
  }
}
```

**After:**

```json
{
  "dependencies": {
    "@walkerOS/web-collector": "^0.0.1",
    "@walkerOS/web-destination-ga4": "^0.0.1",
    "@walkerOS/web-destination-api": "^0.0.1"
  }
}
```

**Note**: If you need standalone access to types or utilities (e.g., for custom destinations), add `@walkerOS/core` explicitly:

```json
{
  "dependencies": {
    "@walkerOS/core": "^0.0.1",
    "@walkerOS/web-collector": "^0.0.1",
    "@walkerOS/web-destination-ga4": "^0.0.1"
  }
}
```

### 2. Update Imports

**Before:**

```typescript
import { Walkerjs, createSourceWalkerjs } from '@elbwalker/source-walkerjs';
import { destinationGoogleGA4 } from '@elbwalker/destination-web-google-ga4';
import { destinationWebAPI } from '@elbwalker/destination-web-api';
import { default as tagger } from '@elbwalker/tagger';
import type { WalkerOS } from '@elbwalker/types';
import { isObject, assign } from '@elbwalker/utils';
```

**After:**

```typescript
import {
  webCollector,
  createWebCollector,
  tagger,
} from '@walkerOS/web-collector';
import { destinationGA4 } from '@walkerOS/web-destination-ga4';
import { destinationAPI } from '@walkerOS/web-destination-api';
import type { WalkerOS, Elb } from '@walkerOS/core';
import { isObject, assign } from '@walkerOS/core';
```

**Alternative** (if you need standalone access to core functionality):

```typescript
import type { WalkerOS, Elb } from '@walkerOS/core';
import { isObject, assign } from '@walkerOS/core';
import { webCollector } from '@walkerOS/web-collector';
import { destinationGA4 } from '@walkerOS/web-destination-ga4';
```

### 3. Update Function Calls

**Before:**

```typescript
const walker = Walkerjs({
  destinations: [destinationGoogleGA4, destinationWebAPI],
});

const { elb, instance } = createSourceWalkerjs(config);
```

**After:**

```typescript
const walker = webCollector({
  destinations: [destinationGA4, destinationAPI],
});

const { elb, instance } = createWebCollector(config);
```

### 4. Update Type References

**Before:**

```typescript
import type { SourceWalkerjs } from '@elbwalker/source-walkerjs';
import type { DestinationGoogleGA4 } from '@elbwalker/destination-web-google-ga4';
import type { WalkerOS, Elb } from '@elbwalker/types';

const config: SourceWalkerjs.InitConfig = {};
const event: WalkerOS.Event = {
  event: 'page view',
  data: {},
  // ...
};
```

**After:**

```typescript
import type { WebCollector } from '@walkerOS/web-collector';
import type { DestinationGA4 } from '@walkerOS/web-destination-ga4';
import type { WalkerOS, Elb } from '@walkerOS/core';

const config: WebCollector.InitConfig = {};
const event: WalkerOS.Event = {
  event: 'page view',
  data: {},
  // ...
};
```

### 5. Server-Side Migration

**Before:**

```typescript
import { createSourceNode } from '@elbwalker/source-node';
import { destinationFirehose } from '@elbwalker/destination-node-aws';
import type { WalkerOS } from '@elbwalker/types';
import { isObject } from '@elbwalker/utils';
```

**After:**

```typescript
import { createServerCollector } from '@walkerOS/server-collector';
import { destinationFirehose } from '@walkerOS/server-destination-aws';
import type { WalkerOS } from '@walkerOS/core';
import { isObject } from '@walkerOS/core';
```

### 6. Core Package Migration (Types & Utils)

This is the most significant change for developers who were directly using `@elbwalker/types` and `@elbwalker/utils`. These packages have been merged into `@walkerOS/core`.

#### Types Migration

**Before:**

```typescript
import type { 
  WalkerOS, 
  Elb, 
  Destination, 
  Mapping 
} from '@elbwalker/types';

// Custom destination implementation
const customDestination: Destination = {
  type: 'custom',
  init: (config) => { /* setup */ },
  push: (event, config, mapping) => { /* handle event */ }
};

// Event type annotation
const event: WalkerOS.Event = {
  event: 'purchase',
  data: { id: 'product-123' },
  // ...
};
```

**After:**

```typescript
import type { 
  WalkerOS, 
  Elb, 
  Destination, 
  Mapping 
} from '@walkerOS/core';

// Custom destination implementation
const customDestination: Destination = {
  type: 'custom',
  init: (config) => { /* setup */ },
  push: (event, config, mapping) => { /* handle event */ }
};

// Event type annotation
const event: WalkerOS.Event = {
  event: 'purchase',
  data: { id: 'product-123' },
  // ...
};
```

#### Utils Migration

**Before:**

```typescript
import { 
  isObject,
  assign,
  getId,
  getByKey,
  SessionStorage,
  LocalStorage
} from '@elbwalker/utils';

// Usage in custom destination
if (isObject(event.data)) {
  const mergedConfig = assign({}, defaultConfig, customConfig);
  const eventId = getId();
}
```

**After:**

```typescript
import { 
  isObject,
  assign,
  getId,
  getByKey,
  SessionStorage,
  LocalStorage
} from '@walkerOS/core';

// Usage in custom destination
if (isObject(event.data)) {
  const mergedConfig = assign({}, defaultConfig, customConfig);
  const eventId = getId();
}
```

#### Combined Usage

**Before:**

```typescript
import type { WalkerOS, Destination } from '@elbwalker/types';
import { isObject, assign } from '@elbwalker/utils';

// Custom destination with both types and utils
const myDestination: Destination = {
  type: 'my-destination',
  init: (config) => {
    return assign({}, defaultConfig, config);
  },
  push: (event: WalkerOS.Event, config, mapping) => {
    if (isObject(event.data)) {
      // Process event
    }
  }
};
```

**After:**

```typescript
import type { WalkerOS, Destination } from '@walkerOS/core';
import { isObject, assign } from '@walkerOS/core';

// Custom destination with both types and utils
const myDestination: Destination = {
  type: 'my-destination',
  init: (config) => {
    return assign({}, defaultConfig, config);
  },
  push: (event: WalkerOS.Event, config, mapping) => {
    if (isObject(event.data)) {
      // Process event
    }
  }
};
```

## Breaking Changes

### 1. Core Package Merger

- **Old:** Separate `@walkerOS/types` and `@walkerOS/utils` packages
- **New:** Unified `@walkerOS/core` package
- **Migration:** Update all imports to use `@walkerOS/core`
- **Impact:** All type imports and utility functions now come from a single package

### 2. Tagger Integration

- **Old:** Separate `@elbwalker/tagger` package
- **New:** Bundled with `@walkerOS/web-collector`
- **Migration:** Remove tagger dependency, import from web-collector

### 3. Export Name Changes

Major export renames across destinations:

- `DestinationGoogleGA4` → `DestinationGA4`
- `DestinationWebAPI` → `DestinationAPI`
- `DestinationGoogleAds` → `DestinationAds`
- `DestinationGoogleGTM` → `DestinationGTM`

### 4. Package Structure Changes

- **Node packages:** `destination-node-*` → `server-destination-*`
- **Web packages:** `destination-web-*` → `web-destination-*`
- **Sources:** `source-*` → `web-collector`/`server-collector`
- **Core packages:** `@walkerOS/types` + `@walkerOS/utils` → `@walkerOS/core`

### 5. Mapping Terminology & Structure Updates

The event mapping system has undergone significant refactoring to improve clarity, consistency, and alignment with the overall `walkerOS` naming conventions.

**Key Changes:**

1.  **Renamed Core Mapping Types:**
    *   `Mapping.Config` (the overall mapping rulebook) has been renamed to `Mapping.Rules`.
    *   `Mapping.EventConfig` (a single event mapping rule) has been renamed to `Mapping.Rule`.
    *   **Impact:** This clarifies the plural/singular relationship and better reflects their purpose as a collection of rules and individual rules.

    **Before:**
    ```typescript
    interface Config<CustomEvent = unknown> { /* ... */ }
    interface EventConfig<CustomEvent = unknown> { /* ... */ }
    ```

    **After:**
    ```typescript
    interface Rules<Settings = unknown> { /* ... */ }
    interface Rule<Settings = unknown> { /* ... */ }
    ```

2.  **Generic Parameter Renamed (`CustomEvent` to `Settings`):**
    *   The generic type parameter used within `Mapping.Rules` and `Mapping.Rule` (previously `CustomEvent`) has been renamed to `Settings`.
    *   **Impact:** This aligns with the `Destination<Settings, Mapping>` generic, making it clear that this generic is for destination-specific configuration settings within a mapping rule.

    **Before:**
    ```typescript
    interface Rule<CustomEvent = unknown> {
      custom?: CustomEvent; // ...
    }
    ```

    **After:**
    ```typescript
    interface Rule<Settings = unknown> {
      settings?: Settings; // ...
    }
    ```

3.  **`custom` Property Renamed to `settings` within `Mapping.Rule`:**
    *   The `custom` property within a `Mapping.Rule` (which holds destination-specific configurations) has been renamed to `settings`.
    *   **Impact:** This provides a more descriptive name for arbitrary configuration data specific to a particular mapping rule, maintaining consistency with `destination.config.settings`.

    **Before:**
    ```typescript
    // In Mapping.Rule
    custom?: CustomEvent;
    ```

    **After:**
    ```typescript
    // In Mapping.Rule
    settings?: Settings;
    ```


    *   **Impact:** This resolves a potential name shadowing issue and clearly indicates that this alias represents a single, resolved mapping rule, distinguishing it from the `Mapping` namespace from `@walkerOS/core`.

## Validation Steps

1. **Update all package references** in package.json
2. **Update all import statements** to use new package names
3. **Migrate to @walkerOS/core** for all type and utility imports
4. **Update function calls** to use new export names
5. **Update type references** to use new namespace names
6. **Test functionality** to ensure destinations work correctly
7. **Update documentation** to reference new package names

### Core Package Migration Checklist

- [ ] Remove `@walkerOS/types` and `@walkerOS/utils` from dependencies
- [ ] Add `@walkerOS/core` if needed for standalone usage
- [ ] Update all type imports to use `@walkerOS/core`
- [ ] Update all utility function imports to use `@walkerOS/core`
- [ ] Verify TypeScript compilation with new imports
- [ ] Test that all utilities work as expected
- [ ] Check that custom destinations still function properly

### Common Migration Issues

**Issue**: TypeScript cannot find types after migration
**Solution**: Ensure you're importing types from `@walkerOS/core` instead of the old packages

**Issue**: Utility functions not working
**Solution**: Update utility imports from `@walkerOS/core` and verify function signatures haven't changed

**Issue**: Build errors in custom destinations
**Solution**: Check that both type and utility imports are using `@walkerOS/core`
