---
title: Sources
description: Event data sources for walkerOS collector
sidebar_position: 4
---

# Sources

Sources are the **entry points** for event data in walkerOS. They capture events
from different environments and formats, then transform them into standardized
events that the collector can process.

In a typical application, events can come from many different places:

- DOM interactions in the browser (clicks, form submissions, page views)
- dataLayer pushes from other tracking tools
- Server-side events from APIs
- Custom application events

Each of these has its own format and structure. Sources provide a clean
separation between:

- **Event capture** - How events are detected and collected
- **Event processing** - How events are enriched, filtered, and sent to
  destinations

This separation makes walkerOS flexible and maintainable, allowing you to add
new event sources without changing your destination configurations.

:::note

walkerOS is primarily build to capture events directly from the browser.

:::

## How sources work

### Basic flow

1. **Capture**: Sources listen for or capture events in their native format
2. **Transform**: Convert the captured data into walkerOS event format
3. **Send**: Push the standardized event to the collector for processing

### Setup within walkerOS

```typescript
import { startFlow } from '@walkeros/collector';
import { createSource, sourceBrowser } from '@walkeros/core';

// Create a collector
const { collector } = await startFlow({
  destinations: {
    /* your destinations */
  },
});

// Add a browser source
const { elb } = await createSource(collector, sourceBrowser, {
  session: true,
  pageview: true,
});

// The source captures browser events and sends them to your collector
```

## Available Sources

### Browser

The browser source captures events from web pages:

- **DOM interactions**: All sorts of user behavior like clicks, form
  submissions, views etc.
- **Automatic tracking**: Page views, session management
- **Flexible configuration**: Customize what gets tracked and how

### dataLayer

The dataLayer source works with existing analytics implementations:

- **Legacy integration**: Works with existing GA4 and dataLayer implementations
- **Event mapping**: Transform dataLayer events to walkerOS format
- **Migration friendly**: Gradual transition from existing setups

## Using Sources

### Basic Setup

Every source follows the same pattern:

1. **Create a collector** with your destination configuration
2. **Add sources** using `createSource` with the source type and configuration
3. **Use the returned `elb` function** to trigger events manually when needed

## Advanced Source Configuration

### Primary Source

By default, `startFlow` returns `collector.push` as the `elb` function. However, you can mark a source as **primary** to use its push method instead:

```typescript
const { collector, elb } = await startFlow({
  sources: {
    browser: {
      code: sourceBrowser,
      config: { /* source settings */ },
      primary: true, // Use browser.push as elb
    },
  },
});

// elb is now browser.push, which provides browser-specific functionality
```

This is useful when a source provides an enhanced interface with additional commands or capabilities beyond the standard collector push.

### Reactive Event Handling

Sources can implement an optional `on` method to react to collector events. This
enables responsive behavior to consent changes, session updates, and collector
state without polling.

```typescript
const mySource: Source.Init = async (config, env) => {
  return {
    type: 'custom',
    config,
    on: async (event, context) => {
      switch (event) {
        case 'consent':
          // React to consent changes
          handleConsentUpdate(context);
          break;
        case 'session':
          // React to session events
          updateSessionBehavior(context);
          break;
      }
    },
  };
};
```

**Available Events:**

- `consent` - Consent state changes (context: consent object)
- `session` - Session lifecycle events (context: session data)
- `ready` - Collector ready state
- `run` - Collector run events

This keeps sources stateless and reactive to collector changes.

## Next Steps

Choose the source that matches your environment for more details:

- **[Browser](./web/browser/)** - For web applications and websites
- **[dataLayer](./web/dataLayer/)** - For integration with existing analytics
