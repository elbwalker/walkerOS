---
title: AWS Lambda
description: AWS Lambda HTTP handler for event collection
sidebar_position: 3
package: '@walkeros/server-source-aws'
---

<PackageLink env="server" github="packages/server/sources/aws" npm="@walkeros/server-source-aws" />

# AWS Lambda

AWS Lambda source for walkerOS - works with API Gateway v1/v2 and Lambda Function URLs.

:::info Where This Fits
The AWS Lambda Source is a **server source** in the walkerOS flow:

```
AWS Lambda Source → Collector → Destinations
       ↓
   HTTP handler (API Gateway, Function URL)
```

It receives events via HTTP and forwards them to your destinations.

[Learn about Operating Modes →](/docs/getting-started/modes/)
:::

## Features

* **Multi-platform**: API Gateway REST (v1), HTTP API (v2), Function URLs
* **Auto-detection**: Automatically detects API Gateway version
* **Pixel tracking**: Optional GET requests with 1x1 GIF response
* **Health checks**: Built-in health check endpoint

## Installation

<CodeSnippet
  code={`npm install @walkeros/server-source-aws`}
  language="bash"
/>

## Quick start

<Tabs groupId="mode">
  <TabItem value="integrated" label="Integrated" default>

<CodeSnippet
  code={`import { sourceLambda } from '@walkeros/server-source-aws';
import { startFlow } from '@walkeros/collector';

let handler: any;

async function init() {
  if (handler) return handler;

  const { sources } = await startFlow({
    sources: {
      lambda: {
        code: sourceLambda,
        config: {
          settings: { cors: true, healthPath: '/health' },
        },
      },
    },
    destinations: {
      // Your destinations
    },
  });

  handler = sources.lambda.push;
  return handler;
}

export const main = async (event: any, context: any) => {
  const h = await init();
  return h(event, context);
};

export { main as handler };`}
  language="typescript"
/>

  </TabItem>
  <TabItem value="bundled" label="Bundled">

Add to your `flow.json` sources:

<CodeSnippet
  code={`"sources": {
  "lambda": {
    "package": "@walkeros/server-source-aws",
    "config": {
      "settings": {
        "cors": true,
        "healthPath": "/health"
      }
    }
  }
}`}
  language="json"
/>

Server sources require platform-specific handlers. For containerized deployments, see [Docker →](/docs/apps/docker).

[See Bundled Mode setup →](/docs/getting-started/modes/bundled) | [CLI reference →](/docs/apps/cli)

  </TabItem>
</Tabs>

## Deployment

### Lambda Function URL (Simplest)

<CodeSnippet
  code={`import * as lambda from 'aws-cdk-lib/aws-lambda';

const fn = new lambda.Function(this, 'Walker', {
  runtime: lambda.Runtime.NODEJS_20_X,
  handler: 'index.handler',
  code: lambda.Code.fromAsset('./dist'),
});

fn.addFunctionUrl({
  authType: lambda.FunctionUrlAuthType.NONE,
  cors: {
    allowedOrigins: ['*'],
    allowedMethods: [lambda.HttpMethod.GET, lambda.HttpMethod.POST],
  },
});`}
  language="typescript"
/>

### Serverless Framework

<CodeSnippet
  code={`# serverless.yml
service: walkeros-collector

provider:
  name: aws
  runtime: nodejs20.x

functions:
  collector:
    handler: dist/index.handler
    events:
      - httpApi:
          path: /collect
          method: post
      - httpApi:
          path: /collect
          method: get
      - httpApi:
          path: /health
          method: get`}
  language="yaml"
/>

## Configuration

| Setting | Type | Default | Description |
|---------|------|---------|-------------|
| `cors` | `boolean \| object` | `true` | CORS configuration |
| `timeout` | `number` | `30000` | Request timeout (ms) |
| `enablePixelTracking` | `boolean` | `true` | Enable GET tracking |
| `healthPath` | `string` | `/health` | Health check path |

## Supported platforms

| Platform | Status |
|----------|--------|
| API Gateway REST API (v1) | ✅ |
| API Gateway HTTP API (v2) | ✅ |
| Lambda Function URLs | ✅ |
| Direct Lambda invocation | ✅ |
