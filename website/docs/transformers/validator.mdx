---
title: Validator
description: "Event validation transformer using JSON Schema"
sidebar_position: 1
package: '@walkeros/transformer-validator'
---

import { schemas } from '@walkeros/transformer-validator/dev';

# Validator

<PackageLink env="server" github="packages/transformers/validator" npm="@walkeros/transformer-validator" />

Validates events using JSON Schema with two modes: **format** (structure) and **contract** (business rules).

## Installation

<CodeSnippet
  code={`npm install @walkeros/transformer-validator`}
  language="bash"
/>

## Setup

<CodeSnippet
  code={`import { startFlow } from '@walkeros/collector';

await startFlow({
  transformers: {
    validate: {
      package: '@walkeros/transformer-validator',
      config: {
        logger: { level: 'DEBUG' },
        settings: {
          format: true,
          contract: {
            product: {
              add: {
                schema: {
                  properties: {
                    data: { required: ['id', 'name'] }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
});`}
  language="typescript"
/>

## Validation Modes

| Mode | Purpose |
|------|---------|
| `format` | Validates full WalkerOS.Event structure |
| `contract` | Validates entity/action-specific business rules |

## Logger Levels

| Level | Output |
|-------|--------|
| `ERROR` | Validation failures only |
| `DEBUG` | All validation results (pass and fail) |

## Configuration

<PropertyTable schema={schemas.settings} />

## Behavior

* **Invalid events**: Stop chain, log error
* **Unmatched events**: Pass through (validation is opt-in)

<details>
<summary>Conditional rules</summary>

Apply different schemas based on event data:

<CodeSnippet
  code={`contract: {
  product: {
    add: [
      {
        condition: (event) => (event.data?.quantity ?? 0) > 10,
        schema: {
          properties: {
            data: { required: ['id', 'quantity', 'warehouse'] }
          }
        }
      },
      {
        schema: {
          properties: {
            data: { required: ['id', 'quantity'] }
          }
        }
      }
    ]
  }
}`}
  language="typescript"
/>

</details>

<details>
<summary>Wildcard patterns</summary>

Match multiple events with wildcards:

<CodeSnippet
  code={`contract: {
  order: {
    '*': {
      schema: {
        properties: {
          data: { required: ['total', 'currency'] }
        }
      }
    }
  }
}`}
  language="typescript"
/>

</details>

## Next Steps

* **[Create your own](./create-your-own)** - Build custom transformers
